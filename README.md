# Bizpanion — AI-Powered Growth Companion for Small Businesses

Bizpanion helps SMEs grow faster using AI across operations, marketing, finance, and digital presence. This monorepo contains:
- Frontend: React (Create React App + CRACO), deployed on Vercel
- Backend API: Node.js + Express + SQLite (via Sequelize), deployed on Render
- RAG Service: Python (Flask), optional OpenAI embeddings with local deterministic fallback, deployable on Render

## Live Deployment

Frontend (Vercel):
- Production: https://bizpanion.vercel.app
- Preview (auto-generated by Vercel on pushes/PRs):
  - https://bizpanion-git-main-agarwalgourav2702-gmailcoms-projects.vercel.app
  - https://bizpanion-o298c7tbe-agarwalgourav2702-gmailcoms-projects.vercel.app

Backend (Render):
- Base URL: https://<your-backend>.onrender.com
- Health: https://<your-backend>.onrender.com/health → {"status":"ok","service":"backend"}

RAG Service (Render, optional OpenAI):
- Base URL: https://<your-rag>.onrender.com
- Health: https://<your-rag>.onrender.com/health → {"status":"healthy","service":"rag"}

Note: Replace <your-backend> and <your-rag> with your actual Render service names.

---

## Quick Start (Local)

Prereqs: Node 18+, npm, Python 3.11+, pip

1) Install & run backend (Express)
- Shell 1:
  - cd backend
  - npm ci
  - cp .env.example .env
  - Edit .env (set JWT_SECRET, optional OPENAI_API_KEY, RAG_SERVICE_URL=http://localhost:5001)
  - npm run dev
- Health: http://localhost:5000/health

2) Install & run RAG (Flask)
- Shell 2:
  - pip install -r backend/requirements.txt
  - python backend/rag_service.py
- Health: http://localhost:5001/health

3) Install & run frontend (React)
- Shell 3:
  - cd frontend
  - npm install
  - set REACT_APP_API=http://localhost:5000 (Windows PowerShell) OR export REACT_APP_API=http://localhost:5000 (macOS/Linux)
  - npm start
- Dev URL: http://localhost:3000

---

## Environment Variables

Frontend (Vercel project → Settings → Environment Variables):
- REACT_APP_API = https://<your-backend>.onrender.com
  - Ensures the Vercel build calls your cloud Backend API instead of localhost.

Backend (Render → Web Service → Environment):
- OPENAI_API_KEY = your-rotated-openai-key (required for AI features on backend)
- JWT_SECRET = your-secret
- NODE_ENV = production
- RAG_SERVICE_URL = https://<your-rag>.onrender.com
- FRONTEND_ORIGIN = https://bizpanion.vercel.app (your production Vercel domain)

RAG (Render → Web Service → Environment):
- OPENAI_API_KEY = your-rotated-openai-key (optional; if unset the service uses a deterministic local embedding fallback)
- PYTHONUNBUFFERED = 1 (recommended)
- Start Command: python rag_service.py (already binds to $PORT)

---

## CORS and SSE (Events)

- The backend is configured to allow:
  - http://localhost:3000
  - http://127.0.0.1:3000
  - The domain specified in FRONTEND_ORIGIN
  - Any *.vercel.app domain (useful for preview URLs)
- Preflight is handled globally; SSE (/events/stream) works from Vercel once REACT_APP_API and FRONTEND_ORIGIN are set.
- If you change your Vercel domain, update FRONTEND_ORIGIN on Render and redeploy.

---

## Build & Deploy

Frontend (Vercel):
- Root Directory: frontend
- Install Command: npm install (or leave blank)
- Build Command: npm run build
- Output Directory: build
- A minimal `frontend/craco.config.js` is included. `frontend/vercel.json` enforces static build if needed.

Backend (Render):
- Root Directory: backend
- Build Command: npm ci
- Start Command: node server.js
- Ensure env vars are set as above.

RAG (Render):
- Root Directory: backend
- Build Command: pip install -r requirements.txt
- Start Command: python rag_service.py

---

## Features (MVP Overview)

- Auth: Email/Password + JWT, roles (entrepreneur/consultant/vendor/admin)
- Dashboard (Growth Hub): AI-driven summaries, KPI cards, revenue by channel
- AI Chat Assistant: Business Q&A, actions (mock endpoints for email/social posting)
- Smart Website Builder: One-click site templates (HTML preview), theme control, deploy endpoint
- RAG Growth Analyzer: Process documents → chunk → embed → search (OpenAI or local fallback embeddings)
- Tasks & Goals: Create/manage tasks, progress
- Vendors & Connections: Placeholder integrations
- Pitch Deck Generator: AI outline → Download PDF
- Agents & Alerts: Multi-agent placeholders, alerting hooks

---

## Security

- Never commit secrets to GitHub.
- Rotate any exposed OpenAI keys immediately.
- Store secrets only in platform environment settings (Render/Vercel).

---

## Troubleshooting

- Frontend on Vercel calls localhost: Set REACT_APP_API to your Render backend URL.
- CORS blocked: Set FRONTEND_ORIGIN to your Vercel URL; redeploy backend.
- Build fails on CI due to ESLint warnings: Fix reported unused vars/imports or (as a last resort) add CI="" in Vercel env.
- RAG service fails due to missing gunicorn: Start with python rag_service.py (already binds to $PORT).

---

## Monorepo Layout

- backend/ — Express server, routes, models (SQLite), schedulers, middlewares
- frontend/ — React app (CRA + CRACO), pages, components
- backend/rag_service.py — Flask microservice for RAG (embeddings + search)
- docker-compose.yml — Optional local orchestration
- Procfile / Dockerfile — Optional deployment helpers

---

## License

Proprietary — All rights reserved. Contact the author/owner for usage permissions.
